/* Mixins */
@import './variables.scss';

// 弹性布局
@mixin flex($direction: row, $justify: flex-start, $align: stretch, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
  flex-wrap: $wrap;
}

// 绝对定位
@mixin position-absolute($top: auto, $right: auto, $bottom: auto, $left: auto) {
  position: absolute;
  top: $top;
  right: $right;
  bottom: $bottom;
  left: $left;
}

// 固定定位
@mixin position-fixed($top: auto, $right: auto, $bottom: auto, $left: auto) {
  position: fixed;
  top: $top;
  right: $right;
  bottom: $bottom;
  left: $left;
}

// 水平垂直居中
@mixin center {
  @include flex(row, center, center);
}

// 单行文本溢出省略
@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 多行文本溢出省略
@mixin text-ellipsis-multi($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

// 简化的ellipsis mixin（兼容性）
@mixin ellipsis($lines: 1) {
  @if $lines == 1 {
    @include text-ellipsis;
  } @else {
    @include text-ellipsis-multi($lines);
  }
}

// 细边框（1px）
@mixin hairline($position: bottom, $color: $border-color) {
  position: relative;

  &::after {
    content: '';
    position: absolute;
    @if $position == top {
      left: 0;
      top: 0;
      right: 0;
      height: 1rpx;
    } @else if $position == right {
      top: 0;
      right: 0;
      bottom: 0;
      width: 1rpx;
    } @else if $position == bottom {
      left: 0;
      bottom: 0;
      right: 0;
      height: 1rpx;
    } @else if $position == left {
      top: 0;
      left: 0;
      bottom: 0;
      width: 1rpx;
    } @else if $position == all {
      left: 0;
      top: 0;
      width: 200%;
      height: 200%;
      transform: scale(0.5);
      transform-origin: 0 0;
      border-radius: inherit;
      border: 1rpx solid $color;
      box-sizing: border-box;
      pointer-events: none;
    }

    @if $position != all {
      background-color: $color;
      transform: scaleY(0.5);
    }
  }
}

// 卡片样式
@mixin card {
  background-color: $bg-card;
  border-radius: $radius-md;
  box-shadow: $shadow-card;
  padding: $spacing-lg;
}

// 安全区域
@mixin safe-area-bottom {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

// 点击态
@mixin active {
  &:active {
    opacity: 0.7;
  }
}

// 清除浮动
@mixin clearfix {
  &::after {
    content: '';
    display: table;
    clear: both;
  }
} 