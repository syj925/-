# è®¤è¯æ¨¡å— API

## æ¦‚è¿°

è®¤è¯æ¨¡å—æä¾›ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€éªŒè¯ç ç­‰åŠŸèƒ½ã€‚

**Base URL**: `/api`

---

## API åˆ—è¡¨

### 1. ç”¨æˆ·ç™»å½•

ğŸŒ **å…¬å¼€æ¥å£**

```http
POST /api/auth/login
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å |
| password | string | æ˜¯ | å¯†ç  |

#### è¯·æ±‚ç¤ºä¾‹

```json
{
  "username": "zhangsan",
  "password": "123456"
}
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "username": "zhangsan",
      "nickname": "å¼ ä¸‰",
      "avatar": "/uploads/avatars/default.png",
      "role": "student"
    }
  }
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 100 | å‚æ•°é”™è¯¯ |
| 200 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 201 | å¯†ç é”™è¯¯ |
| 202 | è´¦å·å·²è¢«ç¦ç”¨ |
| 209 | è´¦å·æ­£åœ¨å®¡æ ¸ä¸­ |

---

### 2. ç”¨æˆ·æ³¨å†Œ

ğŸŒ **å…¬å¼€æ¥å£**

```http
POST /api/auth/register
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å (3-50å­—ç¬¦) |
| password | string | æ˜¯ | å¯†ç  (6-30å­—ç¬¦) |
| nickname | string | æ˜¯ | æ˜µç§° (2-20å­—ç¬¦) |

#### è¯·æ±‚ç¤ºä¾‹

```json
{
  "username": "zhangsan",
  "password": "123456",
  "nickname": "å¼ ä¸‰"
}
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "username": "zhangsan",
      "nickname": "å¼ ä¸‰"
    }
  }
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 100 | å‚æ•°é”™è¯¯ |
| 203 | ç”¨æˆ·åå·²å­˜åœ¨ |

---

### 3. å‘é€éªŒè¯ç 

ğŸŒ **å…¬å¼€æ¥å£**

```http
POST /api/users/send-code
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| phone | string | æ˜¯ | æ‰‹æœºå· (11ä½) |

#### è¯·æ±‚ç¤ºä¾‹

```json
{
  "phone": "13800138000"
}
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "éªŒè¯ç å‘é€æˆåŠŸ",
  "data": null
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 100 | å‚æ•°é”™è¯¯ (æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®) |
| 108 | è¯·æ±‚è¿‡äºé¢‘ç¹ |

---

### 4. éªŒè¯æ‰‹æœºéªŒè¯ç 

ğŸŒ **å…¬å¼€æ¥å£**

```http
POST /api/users/verify-code
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| phone | string | æ˜¯ | æ‰‹æœºå· |
| code | string | æ˜¯ | éªŒè¯ç  (6ä½) |

#### è¯·æ±‚ç¤ºä¾‹

```json
{
  "phone": "13800138000",
  "code": "123456"
}
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "éªŒè¯æˆåŠŸ",
  "data": null
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 100 | å‚æ•°é”™è¯¯ |
| 206 | éªŒè¯ç é”™è¯¯ |
| 207 | éªŒè¯ç å·²è¿‡æœŸ |

---

## é¢‘ç‡é™åˆ¶

| æ¥å£ | é™åˆ¶ |
|------|------|
| ç™»å½• | 15åˆ†é’Ÿå†…æœ€å¤š5æ¬¡ |
| æ³¨å†Œ | 1å°æ—¶å†…æœ€å¤š3æ¬¡ |
| å‘é€éªŒè¯ç  | 1åˆ†é’Ÿå†…æœ€å¤š1æ¬¡ |
