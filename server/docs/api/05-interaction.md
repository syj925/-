# äº¤äº’æ¨¡å— API

## æ¦‚è¿°

äº¤äº’æ¨¡å—åŒ…å«ç‚¹èµã€æ”¶è—ã€å…³æ³¨ç­‰ç¤¾äº¤äº’åŠ¨åŠŸèƒ½ã€‚

---

## ç‚¹èµ API

**Base URL**: `/api/likes`

### 1. ç‚¹èµ

ğŸ” **éœ€è¦ç™»å½•**

```http
POST /api/likes
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| target_id | string | æ˜¯ | ç›®æ ‡ ID (UUID) |
| target_type | string | æ˜¯ | ç›®æ ‡ç±»å‹ (post/comment) |

#### è¯·æ±‚ç¤ºä¾‹

```json
{
  "target_id": "550e8400-e29b-41d4-a716-446655440000",
  "target_type": "post"
}
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "ç‚¹èµæˆåŠŸ",
  "data": {
    "like_count": 101
  }
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 100 | å‚æ•°é”™è¯¯ |
| 300 | å¸–å­ä¸å­˜åœ¨ (target_type=post) |
| 400 | è¯„è®ºä¸å­˜åœ¨ (target_type=comment) |
| 600 | å·²ç‚¹èµ |
| 608 | ä¸æ”¯æŒçš„ç›®æ ‡ç±»å‹ |

---

### 2. å–æ¶ˆç‚¹èµ

ğŸ” **éœ€è¦ç™»å½•**

```http
DELETE /api/likes/:target_type/:target_id
```

#### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| target_type | string | ç›®æ ‡ç±»å‹ (post/comment) |
| target_id | string | ç›®æ ‡ ID |

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "like_count": 100
  }
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 601 | æœªç‚¹èµ |

---

### 3. è·å–æˆ‘çš„ç‚¹èµåˆ—è¡¨

ğŸ” **éœ€è¦ç™»å½•**

```http
GET /api/likes/user/me
```

#### æŸ¥è¯¢å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| target_type | string | å¦ | ç›®æ ‡ç±»å‹ç­›é€‰ |
| page | number | å¦ | é¡µç  |
| limit | number | å¦ | æ¯é¡µæ•°é‡ |

---

### 4. è·å–ç›®æ ‡çš„ç‚¹èµåˆ—è¡¨

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/likes/:target_type/:target_id
```

#### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| target_type | string | ç›®æ ‡ç±»å‹ |
| target_id | string | ç›®æ ‡ ID |

---

### 5. æ£€æŸ¥æ˜¯å¦å·²ç‚¹èµ

ğŸ”“ **å¯é€‰è®¤è¯**

```http
GET /api/likes/check/:target_type/:target_id
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "data": {
    "isLiked": true
  }
}
```

---

## æ”¶è— API

**Base URL**: `/api/favorites`

### 1. æ”¶è—å¸–å­

ğŸ” **éœ€è¦ç™»å½•**

```http
POST /api/favorites
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ ID (UUID) |

#### è¯·æ±‚ç¤ºä¾‹

```json
{
  "post_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "æ”¶è—æˆåŠŸ",
  "data": {
    "favorite_count": 31
  }
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 100 | å‚æ•°é”™è¯¯ |
| 300 | å¸–å­ä¸å­˜åœ¨ |
| 602 | å·²æ”¶è— |

---

### 2. å–æ¶ˆæ”¶è—

ğŸ” **éœ€è¦ç™»å½•**

```http
DELETE /api/favorites/:post_id
```

#### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| post_id | string | å¸–å­ ID |

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 603 | æœªæ”¶è— |

---

### 3. è·å–æˆ‘çš„æ”¶è—åˆ—è¡¨

ğŸ” **éœ€è¦ç™»å½•**

```http
GET /api/favorites/user/me
```

#### æŸ¥è¯¢å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | number | å¦ | é¡µç  |
| limit | number | å¦ | æ¯é¡µæ•°é‡ |

---

### 4. è·å–å¸–å­æ”¶è—ç”¨æˆ·åˆ—è¡¨

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/favorites/post/:post_id
```

---

### 5. æ£€æŸ¥æ˜¯å¦å·²æ”¶è—

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/favorites/check/:post_id
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "data": {
    "isFavorited": false
  }
}
```

---

## å…³æ³¨ API

**Base URL**: `/api/follows`

### 1. å…³æ³¨ç”¨æˆ·

ğŸ” **éœ€è¦ç™»å½•**

```http
POST /api/follows
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| user_id | string | æ˜¯ | ç›®æ ‡ç”¨æˆ· ID (UUID) |

#### è¯·æ±‚ç¤ºä¾‹

```json
{
  "user_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "msg": "å…³æ³¨æˆåŠŸ",
  "data": {
    "isMutual": true
  }
}
```

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 100 | å‚æ•°é”™è¯¯ |
| 200 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 609 | å·²å…³æ³¨è¯¥ç”¨æˆ· |

---

### 2. å–æ¶ˆå…³æ³¨

ğŸ” **éœ€è¦ç™»å½•**

```http
DELETE /api/follows/:user_id
```

#### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| user_id | string | ç”¨æˆ· ID |

#### é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 610 | æœªå…³æ³¨è¯¥ç”¨æˆ· |

---

### 3. è·å–æˆ‘çš„å…³æ³¨åˆ—è¡¨

ğŸ” **éœ€è¦ç™»å½•**

```http
GET /api/follows/me/followings
```

#### æŸ¥è¯¢å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | number | å¦ | é¡µç  |
| limit | number | å¦ | æ¯é¡µæ•°é‡ |

---

### 4. è·å–æˆ‘çš„ç²‰ä¸åˆ—è¡¨

ğŸ” **éœ€è¦ç™»å½•**

```http
GET /api/follows/me/followers
```

---

### 5. è·å–ç”¨æˆ·çš„å…³æ³¨åˆ—è¡¨

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/follows/user/:user_id/followings
```

---

### 6. è·å–ç”¨æˆ·çš„ç²‰ä¸åˆ—è¡¨

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/follows/user/:user_id/followers
```

---

### 7. è·å–ç”¨æˆ·å…³æ³¨æ•°æ®ç»Ÿè®¡

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/follows/user/:user_id/counts
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "data": {
    "followingCount": 80,
    "followerCount": 100
  }
}
```

---

### 8. æ£€æŸ¥æ˜¯å¦å·²å…³æ³¨

ğŸ”“ **å¯é€‰è®¤è¯**

```http
GET /api/follows/check/:user_id
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "data": {
    "isFollowing": true,
    "isFollowedBy": false,
    "isMutual": false
  }
}
```

---

### 9. æ‰¹é‡æ£€æŸ¥å…³æ³¨çŠ¶æ€

ğŸ” **éœ€è¦ç™»å½•**

```http
POST /api/follows/batch-check
```

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| user_ids | array | æ˜¯ | ç”¨æˆ· ID æ•°ç»„ |

---

### 10. è·å–å…±åŒå…³æ³¨

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/follows/common/:user_id1/:user_id2
```

---

### 11. æ£€æŸ¥äº’ç›¸å…³æ³¨

ğŸŒ **å…¬å¼€æ¥å£**

```http
GET /api/follows/mutual/:user_id1/:user_id2
```

---

### 12. è·å–æˆ‘çš„äº’å…³åˆ—è¡¨

ğŸ” **éœ€è¦ç™»å½•**

```http
GET /api/follows/me/mutual
```

---

### 13. è·å–å®Œæ•´å…³æ³¨æ•°æ®

ğŸ” **éœ€è¦ç™»å½•**

```http
GET /api/follows/me/data
```

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 0,
  "data": {
    "followings": [],
    "followers": [],
    "mutuals": [],
    "followingCount": 80,
    "followerCount": 100,
    "mutualCount": 50
  }
}
```
